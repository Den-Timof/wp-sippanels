$(document).ready(function(){$("head").append("<link rel='stylesheet' type='text/css' href='https://use.fontawesome.com/releases/v5.0.13/css/all.css' />");$("head").append("<link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i' />");$("head").prepend("<link rel='stylesheet' type='text/css' href='//xn--e1afgbdfngdou.xn--p1ai/wp-content/themes/sippanels/assets/plugins/bootstrap-multiselect-master/bootstrap-multiselect.css' />");$(function(){$.scrollIt({upKey:38,downKey:40,})});if(window.matchMedia('(max-height: 1080px) and (min-width: 576px)').matches){$(function(){$.stellar({horizontalScrolling:!1,verticalOffset:40})})}
new WOW().init();$('#menu-top-menu').lavalamp({easing:'easeOutBack'});function setAttrLinkMenu(){$('.menu-nav-list .menu-item a').each(function(){var top_menu_href=$(this).attr('href');top_menu_href=top_menu_href.replace(/\D/g,'');$(this).attr('data-scroll-nav',top_menu_href);$(this).attr('href','')})}
setAttrLinkMenu();function deleteFirstLinkMobileMenu(){var menu_top_menu_1_item=$.makeArray($('#menu-top-menu-1 li'));menu_top_menu_1_item=menu_top_menu_1_item.splice(0,1)
menu_top_menu_1_item[0].remove()}
deleteFirstLinkMobileMenu();$('input[type=checkbox]').prop('checked',!1);$('input[type=radio]').prop('checked',!1);$('form').trigger('reset');$('#myModal .personal-data-text').click(function(){$('#myModal .close').trigger('click');$('body').addClass('modal-open2')});$('#myModal2 .personal-data-text').click(function(){$('#myModal2 .close').trigger('click');$('body').addClass('modal-open2')});$('#myModal2-table .personal-data-text').click(function(){$('#myModal2-table .close').trigger('click');$('body').addClass('modal-open2')});$('#myModal4 .personal-data-text').click(function(){$('#myModal4 .close').trigger('click');$('body').addClass('modal-open2')});$('#myModal2 .send-message-text').click(function(){$('#myModal2 .close').trigger('click');$('body').addClass('modal-open2')});$('#myModal2-table .send-message-text').click(function(){$('#myModal2-table .close').trigger('click');$('body').addClass('modal-open2')});$(document).mouseup(function(e){var div=$(".modal.show .modal-content");if(!div.is(e.target)&&div.has(e.target).length===0){$('body').removeClass('modal-open2')}});$('.modal .close').click(function(){$('body').removeClass('modal-open2')});$('form .check').click(function(){var lab_check=$(this);var inp_id=$(this).siblings('.wpcf7-form-control-wrap').children('.wpcf7-checkbox');var mailpoetcheck=$(this).siblings('.wpcf7-form-control-wrap').children('.wpcf7-mailpoetsignup').children('.wpcf7-list-label').children('input');$(this).toggleClass('onClick');if(lab_check.attr('for')==inp_id.attr('id')){inp_id.children('.wpcf7-list-item').children('input').trigger('click')}
if(lab_check.attr('for')==mailpoetcheck.attr('id')){mailpoetcheck.trigger('click')}});if(window.matchMedia('(min-width: 576px)').matches){$('.mini-circle').mouseover(function(){var mini_circle_img=$(this).children('.mini-circle-img');var mini_circle=mini_circle_img.parent('.mini-circle');var mini_circle_id=mini_circle.attr('id');var circle=mini_circle_id.replace('#','');$('.mini-circle').removeClass('active');if(!mini_circle.hasClass('active')){mini_circle.addClass('active')}
$('.circle-text').hide();$('.'+circle).css('display','flex')});$('.mini-circle').mouseout(function(){var mini_circle_img=$(this).children('.mini-circle-img');var mini_circle=mini_circle_img.parent('.mini-circle');var mini_circle_id=mini_circle.attr('id');var circle=mini_circle_id.replace('#','');$('.circle-text').hide();$('.'+circle).css('display','flex')});$('.mini-circle-108').addClass('active');$('.circle-108').css('display','flex')};$('a[href="tel:+"]').each(function(i,e){var element=$(e).html().replace(/\D+/g,"");$(this).attr('href','tel:+'+element)});$('a[href="mailto:"]').each(function(i,e){var element=$(e).html();$(this).attr('href','mailto:'+element)});$('#navbarSupportedContent .menu-item a').click(function(){$('.mobile-navigation_header-sip .navbar-toggler').trigger('click')});function loadYmaps(){ymaps.ready(function(){var myMap=new ymaps.Map('map',{center:[0,0],zoom:900});var address=$('#address').html().replace('<br>',',');var coorCity;var destinations={};destinations.City='';var menuContainer=$('#address');for(var item in destinations){ymaps.geocode(address,{results:1}).then(function(res){coorCity=res.geoObjects.get(0).geometry.getCoordinates();destinations.City=coorCity;(function(title,geoPoint){$('#address').bind('click',function(){myMap.panTo(coorCity,{flying:!0});return!1}).end().appendTo(menuContainer)})(item,destinations.City)
ymaps.geocode(destinations.City,{results:1}).then(function(res){var firstGeoObject=res.geoObjects.get(0);var bounds=firstGeoObject.properties.get('boundedBy');myMap.geoObjects.add(firstGeoObject);myMap.setBounds(bounds,{checkZoomRange:!0})})})}})}
function isVisible(tag){var t=$(tag);var w=$(window);var wt=w.scrollTop();var tt=t.offset().top;var tb=tt+t.height();return((tb<=wt+w.height())&&(tt>=wt))}
$(function(){$(window).scroll(function(){var b=$("#map");if(!b.prop("shown")&&isVisible(b)){b.prop("shown",!0);loadYmaps()}})});jQuery('<div class="quantity-nav"><div class="quantity-button quantity-up noselect"><img src="//xn--e1afgbdfngdou.xn--p1ai/wp-content/themes/sippanels/assets/img/quantity-up.png"></div><div class="quantity-button quantity-down noselect"><img src="//xn--e1afgbdfngdou.xn--p1ai/wp-content/themes/sippanels/assets/img/quantity-down.png"></div></div>').insertAfter('.quantity input');function setQuantity(){jQuery('.quantity').each(function(){var spinner=jQuery(this),input=spinner.find('input[type="number"]'),btnUp=spinner.find('.quantity-up'),btnDown=spinner.find('.quantity-down'),min=input.attr('min'),max=input.attr('max');btnUp.click(function(){var oldValue=parseFloat(input.val());if(oldValue>=max){var newVal=oldValue}else{var newVal=oldValue+1}
spinner.find("input").val(newVal);spinner.find("input").trigger("change");if(input.val().length==2&&!$('.quantity').hasClass('step-2')){$('.quantity').removeClass().addClass('quantity');$('.quantity').addClass('step-2')}else if(input.val().length==3&&!$('.quantity').hasClass('step-3')){$('.quantity').removeClass().addClass('quantity');$('.quantity').addClass('step-3')}});btnDown.click(function(){var oldValue=parseFloat(input.val());if(oldValue<=min){var newVal=oldValue}else{var newVal=oldValue-1}
spinner.find("input").val(newVal);spinner.find("input").trigger("change");if(input.val().length==2&&!$('.quantity').hasClass('step-2')){$('.quantity').removeClass().addClass('quantity');$('.quantity').addClass('step-2')}else if(input.val().length==1&&!$('.quantity').hasClass('step-1')){$('.quantity').removeClass().addClass('quantity');$('.quantity').addClass('step-1')}})})}
setQuantity();$('.img-sip-block').click(function(){$(this).siblings('.btn-sip-block').trigger('click')});var button_sip_block=$('.sip-block .btn-sip-block');button_sip_block.on('click',processOrderForm);var image_sio_block=$('.sip-block .img-sip-block');image_sio_block.on('click',processOrderForm);var clearCheck=function(){setTimeout(function(){if($('.modal').find('.wpcf7-response-output').hasClass('wpcf7-mail-sent-ok')){$('.modal').find('.close').trigger('click')}},2000)};$('.modal').find('.btn-sip').on('click',clearCheck);$('.button-feedback').click(function(){$($(this).attr('data-target')).find('form').trigger('reset');$($(this).attr('data-target')).find('.wpcf7-not-valid-tip').remove();$($(this).attr('data-target')).find('.wpcf7-response-output').hide();$($(this).attr('data-target')).find('.check').removeClass('onClick')});$('.send-message-text').click(function(){$($(this).attr('data-target')).find('form').trigger('reset');$($(this).attr('data-target')).find('.wpcf7-not-valid-tip').remove();$($(this).attr('data-target')).find('.wpcf7-response-output').hide();$($(this).attr('data-target')).find('.check').removeClass('onClick')});$('.fifth-container .btn-sip').click(function(){$($(this).attr('data-target')).find('form').trigger('reset');$($(this).attr('data-target')).find('.wpcf7-not-valid-tip').remove();$($(this).attr('data-target')).find('.wpcf7-response-output').hide();$($(this).attr('data-target')).find('.check').removeClass('onClick')});function processOrderForm(){$('.sip-block .btn-sip-block').click(function(){let sip_block=$(this).parent('.sip-block'),btn_sip_block=sip_block.find('.btn-sip'),id_modal=btn_sip_block.attr('data-target');let title_sip_block_text=sip_block.find('.title-sip-block').text(),text_sip_block_text=sip_block.find('.text-sip-block').text(),img_sip_block_src=sip_block.find('.img-sip-block').attr('src');let sip_blocks_data_size=sip_block.children('.data-size');let sip_blocks_data_thead=sip_block.children('.data-thead').children().clone();$(id_modal).find('.thead-row').find('.size-column').remove();$(id_modal).find('.thead-row').prepend(sip_blocks_data_thead);var thead_column_length=$(id_modal).find('.thead-row .table-column').length;thead_column_length=Number(thead_column_length);var new_class='col-md-'+(8-(6-thead_column_length)*2);$(id_modal).find('.total-price').removeClass('col-md-8');$(id_modal).find('.total-price').addClass(new_class);$(id_modal).find('.modal-title').text(title_sip_block_text);$(id_modal).find('#input-modal-title').attr('value',title_sip_block_text);$(id_modal).find('.modal-text').text(text_sip_block_text);$(id_modal).find('.form-modal2-block-img').children('img').attr('src',img_sip_block_src);$(id_modal).find('#input-modal-img').attr('value',img_sip_block_src);$(id_modal).find('.btn-sip').unbind('submit').submit()
let array_size_blocks;if(sip_blocks_data_size.hasClass('table-version')){array_size_blocks=sip_blocks_data_size.children('.table-row')}else{array_size_blocks=sip_blocks_data_size.children('.size-block')}
var array_name_size=array_size_blocks.children('.name-size');$(id_modal).find('form').trigger('reset');$(id_modal).find('.wpcf7-not-valid-tip').remove();$(id_modal).find('.wpcf7-response-output').hide();$(id_modal).find('.check').removeClass('onClick');$('.number-640 input').val(1);$(id_modal).find('#size-select').siblings('.btn-group').children('button.multiselect').removeClass('disabled');$(id_modal).find('#size-select').siblings('.btn-group').children('button.multiselect').removeAttr('disabled');$(id_modal).find('select').removeAttr('disabled');$(id_modal).find('input[type="number"]').attr('onkeypress','');$(id_modal).find('input[type="number"]').siblings('.quantity-nav').show();$(id_modal).find('input[type="number"]').removeClass('disabled');$(id_modal).find('.btn-sip').unbind('click',stopSubmit);if($(id_modal).find('#size-select').siblings().is('.btn-group')){$(id_modal).find('.multiselect-container').empty();$(id_modal).find('#size-select').children('option').each(function(g,h){var wrap_elem_multi_cont=''+'<li>'+'<a tabindex="0">'+'<label class="radio" title="'+$(h).text()+'">'+'<input value="'+$(h).text()+'" type="radio">'+$(h).text()+'</label>'+'</a>'+'</li>'+'';$(id_modal).find('.multiselect-container').append(wrap_elem_multi_cont)})}
if(array_size_blocks.length===0){$(id_modal).find('select').attr('disabled','disabled');$(id_modal).find('#size-select').siblings('.btn-group').children('button.multiselect').addClass('disabled');$(id_modal).find('#size-select').siblings('.btn-group').children('button.multiselect').attr('disabled');$(id_modal).find('input[type="number"]').addClass('disabled');$(id_modal).find('input[type="number"]').attr('onkeypress','return false');$(id_modal).find('input[type="number"]').val(0);$(id_modal).find('input[type="number"]').siblings('.quantity-nav').hide();$(id_modal).find('select').children('option:selected').text('Размеров нет');$(id_modal).find('select').children('option:selected').attr('value','Размеров нет');$(id_modal).find('.form-modal2-total-price').children('p').children('b').children('span').text(0);var stopSubmit=function(e){e.preventDefault()};$(id_modal).find('.btn-sip').on('click',stopSubmit);var wrap_elem_size_option='<option value="Размеров нет">Размеров нет</option>';$('#size-select').append(wrap_elem_size_option)}
if(sip_blocks_data_size.hasClass('table-version')){$(id_modal).find('.tbody-wrapper').html(sip_blocks_data_size.html());$(id_modal).find('input[type="number"]').val(0);$(id_modal).find('input[type="number"]').each(function(){$(this).insertAfter($(this).siblings('.quantity-nav').find('.quantity-up'))})
$(id_modal).find('.quantity-nav .quantity-button').each(function(i,e){$(e).find('img').remove();if($(e).hasClass('quantity-up'))$(e).text('+');if($(e).hasClass('quantity-down'))$(e).text('-')});setQuantity();setNameMobileThead()}else{var array_name_size=array_size_blocks.children('.name-size');$('#size-select').empty();array_name_size.each(function(a,b){var wrap_elem_size_option=''+'<option value="'+$(b).text()+'">'+$(b).text()+'</option>'+'';$('#size-select').append(wrap_elem_size_option)})}
var size_option_selected_text=$(id_modal).find('#size-select').children('option:selected').text();var size_multiselect_selected=$(id_modal).find('#size-select').siblings('.btn-group').children('button.multiselect').children('.multiselect-selected-text');size_multiselect_selected.text(size_option_selected_text);$(id_modal).find('#size-select').siblings('.btn-group').children('.multiselect-container').find('input[type="radio"]').each(function(){if($(this).attr('value')==size_option_selected_text){$(this).prop('checked',!0)}});function setPriceStringWithSpaces(price){price=Array.from(price)
price.reverse();var arr=[];var count=0;for(let index=0;index<price.length;index++){const element=price[index];if(element=='.'){count=0;arr.push(element)}else{count++;arr.push(element)}
if((count!=0)&&(count%3==0)&&!(index==(price.length-1))){arr.push(' ')}}
arr.reverse();price=arr;price=price.join('');return price}
function setPriceStringWithoutSpaces(price){price=Array.from(price)
var arr=[];for(let index=0;index<price.length;index++){const element=price[index];if(element==' '){continue}else{arr.push(element)}}
price=arr;price=price.join('');price=parseFloat(price);return price}
function setTotalAmount(){if(sip_blocks_data_size.hasClass('table-version')){var modal_tbody=$(id_modal).find('.tbody-wrapper'),tbody_rows=modal_tbody.find('.table-row');setPriceInRowTbody();function setPriceInRowTbody(){tbody_rows.each(function(i,e){var tbody_row=$(e),columns_in_row=tbody_row.find('.table-column');var price_text,quantity_val,totalPrice_text
columns_in_row.each(function(i,e){var column_in_row=$(e);if(column_in_row.hasClass('price-column'))
price_text=column_in_row.find('p').text().replace(/[^0-9\.]/gi,'');if(column_in_row.hasClass('quantity-column'))
quantity_val=column_in_row.find('input[type="number"]').val();quantity_val=parseInt(quantity_val);if(column_in_row.hasClass('totalPrice-column')){totalPrice_text=parseFloat(price_text)*quantity_val;totalPrice_text=setPriceStringWithSpaces(String(totalPrice_text));column_in_row.find('p').text(totalPrice_text+' руб.')}})})}
setTotalQuantity();function setTotalQuantity(){var totalQuantity=0;var totalQuantityTable=$(id_modal).find('.totalQuantity-column');var quantity_columns=$(id_modal).find('.quantity-column');quantity_columns.each(function(i,e){var val_quantity_column=$(e).find('input[type="number"]').val();val_quantity_column=parseInt(val_quantity_column);totalQuantity=totalQuantity+val_quantity_column});totalQuantityTable.text(totalQuantity)}
setTotalPrice();function setTotalPrice(){var totalPrice=0;var totalPriceTable=$(id_modal).find('.totalPriceTable-column');var totalPrice_columns=$(id_modal).find('.totalPrice-column');totalPrice_columns.each(function(i,e){var totalPrice_column=$(e).find('p').text().replace(/[^0-9\.\,]/gi,'');totalPrice=totalPrice+parseFloat(totalPrice_column)});totalPrice=setPriceStringWithSpaces(String(totalPrice));totalPriceTable.text(totalPrice+' руб.')}
setTextareaFormModal();function setTextareaFormModal(){var textarea_form_modal='';var count=0;tbody_rows.each(function(i,e){var tbody_row=$(e),tbody_index_row=i,columns_in_row=tbody_row.find('.table-column');var price_column_in_row=tbody_row.find('.price-column p').text();var quantity_column_in_row=tbody_row.find('.quantity-column input[type="number"]').val();var totalPrice_column_in_row=tbody_row.find('.totalPrice-column').text();var size_column_in_row_text='';var size_column_in_row=tbody_row.find('.size-column p').each(function(){size_column_in_row_text+=String(parseFloat($(this).text()));size_column_in_row_text+='x'});if(size_column_in_row_text.slice(-1)=='x'){size_column_in_row_text=size_column_in_row_text.substring(0,size_column_in_row_text.length-1)}
columns_in_row.each(function(i,e){var column_in_row=$(e);if((column_in_row.hasClass('quantity-column'))&&(column_in_row.find('input[type="number"]').val()>0)){textarea_form_modal=textarea_form_modal+(++count)+'. '+size_column_in_row_text+' - '+price_column_in_row+' - '+quantity_column_in_row+' шт.'+' - '+'Итого: '+totalPrice_column_in_row+';\n'}})});$(id_modal).find('#input-modal-textarea').text(textarea_form_modal)}
var totalQuantity_text=$(id_modal).find('.totalQuantity-column').text();$(id_modal).find('#input-modal-quantity').attr('value',totalQuantity_text+' шт.');var totalPriceTable_text=$(id_modal).find('.totalPriceTable-column').text();$(id_modal).find('#input-modal-totalPrice').attr('value',totalPriceTable_text)}else{var size_option_text=$('#size-select option:selected').text(),array_size_blocks=sip_block.children('.data-size').children('.size-block'),array_name_size=array_size_blocks.children('.name-size'),array_price_size=array_size_blocks.children('.price-size');array_price_size.each(function(t,y){array_name_size.each(function(u,o){if(t==u&&size_option_text==$(o).text()){var price_text=$(y).text().replace(/\D+/g,"");var value_type_number=$('input[type="number"].input-form-number').val();var new_value_price;new_value_price=value_type_number*price_text;var form_modal2_total_price_span=$(id_modal).find('.form-modal2-total-price').children('p').children('b').children('span');if(new_value_price>0){form_modal2_total_price_span.text(new_value_price)}else{form_modal2_total_price_span.text(0)}
var form_price_text=form_modal2_total_price_span.text();var arr_form_price_1=form_price_text.split('');var arr_form_price_2=[];var arr_form_price_3=[];for(var count=0;count<arr_form_price_1.length;count++){arr_form_price_2.push(arr_form_price_1[count])}
arr_form_price_2.reverse()
for(var count=0;count<arr_form_price_2.length;count++){if(arr_form_price_2.length>3){if((count>0)&(count%3==0)){arr_form_price_3.push(' ');arr_form_price_3.push(arr_form_price_2[count])}else{arr_form_price_3.push(arr_form_price_2[count])}}else if(arr_form_price_2.length<=3){arr_form_price_3.push(arr_form_price_2[count])}}
var string_arr_form_price_3=arr_form_price_3.reverse().join().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");form_modal2_total_price_span.text(string_arr_form_price_3);$('#input-total-price').attr('value',form_modal2_total_price_span.text());new_value_price=0}})})}}
setTotalAmount();$(id_modal).find('input[type="number"]').keypress(function(m){if(m.keyCode==13||m.keyCode==38||m.keyCode==40){m.preventDefault()}});$('#size-select').multiselect();$('#size-select').change(function(){setTotalAmount()});$('input[type="number"].input-form-number').change(function(){setTotalAmount()});var clearNumber=function(){setTimeout(function(){if($(id_modal).find('.wpcf7-response-output').hasClass('wpcf7-mail-sent-ok')){$(id_modal).find('.close').trigger('click')}},2000)};$(id_modal).find('.btn-sip').on('click',clearNumber)});jQuery(document).on('click','.wpcf7-submit',function(e){if(jQuery('.ajax-loader').hasClass('is-active')){e.preventDefault();return!1}});jQuery(document).on('click','.wpcf7-submit',function(e){if(jQuery('img',jQuery(this).closest('div')).css('visibility')==='visible'){e.preventDefault();return!1}})}
processOrderForm()
function setNameMobileThead(){let table_form=$('#myModal2-table .table-wrap'),thead_columns=table_form.find('.thead-row .table-column p'),tbody_rows=table_form.find('.tbody-wrapper .table-row');tbody_rows.each(function(i,e){let tbody_row=$(e);let tbody_columns=tbody_row.find('.table-column');tbody_columns.each(function(i,e){let tbody_column=$(e),tbody_column_index=i,tbody_column_html=$(e).html();if($(e).find('input[type="number"]').length>0){$(e).find('input[type="number"]').insertAfter($(e).find('.quantity-up'))}
thead_columns.each(function(i,e){let thead_column=$(e),thead_column_index=i,thead_column_text=$(e).text();if((window.matchMedia('(max-width: 767.98px)').matches)){if(thead_column_index==tbody_column_index){if(tbody_column.find('span').length>0){return!1}else{$(tbody_column).prepend('<span style="font-weight: bold;">'+thead_column_text+' : </span>')}}}else if((window.matchMedia('(min-width: 768px)').matches)){if(thead_column_index==tbody_column_index){if(tbody_column.find('span').length>0){tbody_column.find('span').remove()}}}})})})}
setNameMobileThead();$(window).resize(function(){setNameMobileThead()})})