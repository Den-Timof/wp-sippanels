$(document).ready(function () {
	$("head").append("<link rel='stylesheet' type='text/css' href='https://use.fontawesome.com/releases/v5.0.13/css/all.css' />"), $("head").append("<link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i' />"), $("head").prepend("<link rel='stylesheet' type='text/css' href='//xn--e1afgbdfngdou.xn--p1ai/wp-content/themes/sippanels/assets/plugins/bootstrap-multiselect-master/bootstrap-multiselect.css' />"), $(function () {
		$.scrollIt({
			upKey: 38,
			downKey: 40
		})
	}), window.matchMedia("(max-height: 1080px) and (min-width: 576px)").matches && $(function () {
		$.stellar({
			horizontalScrolling: !1,
			verticalOffset: 40
		})
	}), (new WOW).init(), $("#menu-top-menu").lavalamp({
		easing: "easeOutBack"
	}), $(".menu-nav-list .menu-item a").each(function () {
		var t = $(this).attr("href");
		t = t.replace(/\D/g, ""), $(this).attr("data-scroll-nav", t), $(this).attr("href", "")
	}), $.makeArray($("#menu-top-menu-1 li")).splice(0, 1)[0].remove(), $("input[type=checkbox]").prop("checked", !1), $("input[type=radio]").prop("checked", !1), $("form").trigger("reset"), 
	
	$("#myModal .personal-data-text").click(function () {
		// setTimeout(function() {
		// }, 3000)
		$("#myModal .close").trigger("click"), $("body").addClass("modal-open2")
	}),
	$("#myModal2 .personal-data-text").click(function () {
		// setTimeout(function() {
		// }, 3000)
		$("#myModal2 .close").trigger("click"), $("body").addClass("modal-open2")
	}), 
	$("#myModal4 .personal-data-text").click(function () {
		// setTimeout(function() {
		// }, 3000)
		$("#myModal4 .close").trigger("click"), $("body").addClass("modal-open2")
	}), 
	$("#myModal2 .send-message-text").click(function () {
		// setTimeout(function() {
		// }, 3000)
		$("#myModal2 .close").trigger("click"), $("body").addClass("modal-open2")
	}), 
	
	$(document).mouseup(function (t) {
		var e = $(".modal.show .modal-content");
		e.is(t.target) || 0 !== e.has(t.target).length || $("body").removeClass("modal-open2")
	}), $(".modal .close").click(function () {
		$("body").removeClass("modal-open2")
	}), $("form .check").click(function () {
		var t = $(this),
			e = $(this).siblings(".wpcf7-form-control-wrap").children(".wpcf7-checkbox"),
			i = $(this).siblings(".wpcf7-form-control-wrap").children(".wpcf7-mailpoetsignup").children(".wpcf7-list-label").children("input");
		$(this).toggleClass("onClick"), t.attr("for") == e.attr("id") && e.children(".wpcf7-list-item").children("input").trigger("click"), t.attr("for") == i.attr("id") && i.trigger("click")
	}), window.matchMedia("(min-width: 576px)").matches && ($(".mini-circle").mouseover(function () {
		var t = $(this).children(".mini-circle-img").parent(".mini-circle"),
			e = t.attr("id").replace("#", "");
		$(".mini-circle").removeClass("active"), t.hasClass("active") || t.addClass("active"), $(".circle-text").hide(), $("." + e).css("display", "flex")
	}), $(".mini-circle").mouseout(function () {
		var t = $(this).children(".mini-circle-img").parent(".mini-circle").attr("id").replace("#", "");
		$(".circle-text").hide(), $("." + t).css("display", "flex")
	}), $(".mini-circle-108").addClass("active"), $(".circle-108").css("display", "flex")), $('a[href="tel:+"]').each(function (t, e) {
		var i = $(e).html().replace(/\D+/g, "");
		$(this).attr("href", "tel:+" + i)
	}), $('a[href="mailto:"]').each(function (t, e) {
		var i = $(e).html();
		$(this).attr("href", "mailto:" + i)
	}), $("#navbarSupportedContent .menu-item a").click(function () {
		$(".mobile-navigation_header-sip .navbar-toggler").trigger("click")
	}), $(function () {
		$(window).scroll(function () {
			var t, e, i, n, s = $("#map");
			!s.prop("shown") && (t = $(s), e = $(window), i = e.scrollTop(), (n = t.offset().top) + t.height() <= i + e.height() && n >= i) && (s.prop("shown", !0), ymaps.ready(function () {
				var t, e = new ymaps.Map("map", {
						center: [0, 0],
						zoom: 900
					}),
					i = $("#address").html().replace("<br>", ","),
					n = {
						City: ""
					},
					s = $("#address");
				for (var a in n) ymaps.geocode(i, {
					results: 1
				}).then(function (i) {
					t = i.geoObjects.get(0).geometry.getCoordinates(), n.City = t, n.City, $("#address").bind("click", function () {
						return e.panTo(t, {
							flying: !0
						}), !1
					}).end().appendTo(s), ymaps.geocode(n.City, {
						results: 1
					}).then(function (t) {
						var i = t.geoObjects.get(0),
							n = i.properties.get("boundedBy");
						e.geoObjects.add(i), e.setBounds(n, {
							checkZoomRange: !0
						})
					})
				})
			}))
		})
	}), jQuery('<div class="quantity-nav"><div class="quantity-button quantity-up"><img src="https://xn--e1afgbdfngdou.xn--p1ai/wp-content/themes/sippanels/assets/img/quantity-up.png"></div><div class="quantity-button quantity-down"><img src="https://xn--e1afgbdfngdou.xn--p1ai/wp-content/themes/sippanels/assets/img/quantity-down.png"></div></div>').insertAfter(".quantity input"), jQuery(".quantity").each(function () {
		var t = jQuery(this),
			e = t.find('input[type="number"]'),
			i = t.find(".quantity-up"),
			n = t.find(".quantity-down"),
			s = e.attr("min"),
			a = e.attr("max");
		i.click(function () {
			var i = parseFloat(e.val());
			if (i >= a) var n = i;
			else n = i + 1;
			t.find("input").val(n), t.find("input").trigger("change"), 2 != e.val().length || $(".quantity").hasClass("step-2") ? 3 != e.val().length || $(".quantity").hasClass("step-3") || ($(".quantity").removeClass().addClass("quantity"), $(".quantity").addClass("step-3")) : ($(".quantity").removeClass().addClass("quantity"), $(".quantity").addClass("step-2"))
		}), n.click(function () {
			var i = parseFloat(e.val());
			if (i <= s) var n = i;
			else n = i - 1;
			t.find("input").val(n), t.find("input").trigger("change"), 2 != e.val().length || $(".quantity").hasClass("step-2") ? 1 != e.val().length || $(".quantity").hasClass("step-1") || ($(".quantity").removeClass().addClass("quantity"), $(".quantity").addClass("step-1")) : ($(".quantity").removeClass().addClass("quantity"), $(".quantity").addClass("step-2"))
		})
	}), $(".img-sip-block").click(function () {
		$(this).siblings(".btn-sip-block").trigger("click")
	}), $(".sip-block .btn-sip-block").on("click", t), $(".sip-block .img-sip-block").on("click", t);

	function t() {
		$(".sip-block .btn-sip-block").click(function () {
			var t = $(this).parent(".sip-block"),
				e = t.children(".btn-sip").attr("data-target"),
				i = t.children(".title-sip-block").text(),
				n = t.children(".text-sip-block").text(),
				s = t.children(".img-sip-block").attr("src"),
				a = (c = t.children(".data-size").children(".size-block")).children(".name-size");
			if ($(e).find("form").trigger("reset"), $(e).find(".wpcf7-not-valid-tip").remove(), $(e).find(".wpcf7-response-output").hide(), $(e).find(".check").removeClass("onClick"), $(".number-640 input").val(1), $(e).find("#size-select").siblings(".btn-group").children("button.multiselect").removeClass("disabled"), $(e).find("#size-select").siblings(".btn-group").children("button.multiselect").removeAttr("disabled"), $(e).find("select").removeAttr("disabled"), $(e).find('input[type="number"]').attr("onkeypress", ""), $(e).find('input[type="number"]').siblings(".quantity-nav").show(), $(e).find('input[type="number"]').removeClass("disabled"), $(e).find(".btn-sip").unbind("click", l), $(e).find("#size-select").siblings().is(".btn-group") && ($(e).find(".multiselect-container").empty(), $(e).find("#size-select").children("option").each(function (t, i) {
					var n = '<li><a tabindex="0"><label class="radio" title="' + $(i).text() + '"><input value="' + $(i).text() + '" type="radio">' + $(i).text() + "</label></a></li>";
					$(e).find(".multiselect-container").append(n)
				})), 0 === c.length) {
				$(e).find("select").attr("disabled", "disabled"), $(e).find("#size-select").siblings(".btn-group").children("button.multiselect").addClass("disabled"), $(e).find("#size-select").siblings(".btn-group").children("button.multiselect").attr("disabled"), $(e).find('input[type="number"]').addClass("disabled"), $(e).find('input[type="number"]').attr("onkeypress", "return false"), $(e).find('input[type="number"]').val(0), $(e).find('input[type="number"]').siblings(".quantity-nav").hide(), $(e).find("select").children("option:selected").text("Размеров нет"), $(e).find("select").children("option:selected").attr("value", "Размеров нет"), $(e).find(".form-modal2-total-price").children("p").children("b").children("span").text(0);
				var l = function (t) {
					t.preventDefault()
				};
				$(e).find(".btn-sip").on("click", l)
			}
			$(e).find(".modal-title").text(i), $("#input-modal-title").attr("value", i), $(e).find(".modal-text").text(n), $(e).find(".form-modal2-block-img").children("img").attr("src", s), $(e).find(".btn-sip").unbind("submit").submit();
			var c;
			a = (c = t.children(".data-size").children(".size-block")).children(".name-size");
			if ($("#size-select").empty(), 0 === c.length) {
				$("#size-select").append('<option value="Размеров нет">Размеров нет</option>')
			}
			a.each(function (t, e) {
				var i = '<option value="' + $(e).text() + '">' + $(e).text() + "</option>";
				$("#size-select").append(i)
			});
			var r = $(e).find("#size-select").children("option:selected").text();

			function o() {
				var i = $("#size-select option:selected").text(),
					n = t.children(".data-size").children(".size-block"),
					s = n.children(".name-size");
				n.children(".price-size").each(function (t, n) {
					s.each(function (s, a) {
						if (t == s && i == $(a).text()) {
							var l, c = $(n).text().replace(/\D+/g, "");
							l = $('input[type="number"].input-form-number').val() * c;
							var r = $(e).find(".form-modal2-total-price").children("p").children("b").children("span");
							l > 0 ? r.text(l) : r.text(0);
							for (var o = r.text().split(""), d = [], p = [], u = 0; u < o.length; u++) d.push(o[u]);
							d.reverse();
							for (u = 0; u < d.length; u++) d.length > 3 ? u > 0 & u % 3 == 0 ? (p.push(" "), p.push(d[u])) : p.push(d[u]) : d.length <= 3 && p.push(d[u]);
							var f = p.reverse().join().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g, "");
							r.text(f), $("#input-total-price").attr("value", r.text()), l = 0
						}
					})
				})
			}
			$(e).find("#size-select").siblings(".btn-group").children("button.multiselect").children(".multiselect-selected-text").text(r), $(e).find("#size-select").siblings(".btn-group").children(".multiselect-container").find('input[type="radio"]').each(function () {
				$(this).attr("value") == r && $(this).prop("checked", !0)
			}), o(), $(e).find('input[type="number"]').keypress(function (t) {
				13 != t.keyCode && 38 != t.keyCode && 40 != t.keyCode || t.preventDefault()
			}), $("#size-select").multiselect(), $("#size-select").change(function () {
				o()
			}), $('input[type="number"].input-form-number').change(function () {
				o()
			});
			// $(e).find(".btn-sip").on("click", function () {
			// 	setTimeout(function () {
			// 		$(e).find(".wpcf7-response-output").hasClass("wpcf7-mail-sent-ok") && $(e).find(".close").trigger("click")
			// 	}, 3000)
			// })
		}), jQuery(document).on("click", ".wpcf7-submit", function (t) {
			if (jQuery(".ajax-loader").hasClass("is-active")) return t.preventDefault(), !1
		}), jQuery(document).on("click", ".wpcf7-submit", function (t) {
			if ("visible" === jQuery("img", jQuery(this).closest("div")).css("visibility")) return t.preventDefault(), !1
		})
	}
	$(".modal").find(".btn-sip").on("click", function () {
		// setTimeout(function () {
		// 	$(".modal").find(".wpcf7-response-output").hasClass("wpcf7-mail-sent-ok") && $(".modal").find(".close").trigger("click")
		// }, 3000)
	}), $(".button-feedback").click(function () {
		$($(this).attr("data-target")).find("form").trigger("reset"), $($(this).attr("data-target")).find(".wpcf7-not-valid-tip").remove(), $($(this).attr("data-target")).find(".wpcf7-response-output").hide(), $($(this).attr("data-target")).find(".check").removeClass("onClick")
	}), $(".send-message-text").click(function () {
		$($(this).attr("data-target")).find("form").trigger("reset"), $($(this).attr("data-target")).find(".wpcf7-not-valid-tip").remove(), $($(this).attr("data-target")).find(".wpcf7-response-output").hide(), $($(this).attr("data-target")).find(".check").removeClass("onClick")
	}), $(".fifth-container .btn-sip").click(function () {
		$($(this).attr("data-target")).find("form").trigger("reset"), $($(this).attr("data-target")).find(".wpcf7-not-valid-tip").remove(), $($(this).attr("data-target")).find(".wpcf7-response-output").hide(), $($(this).attr("data-target")).find(".check").removeClass("onClick")
	}), t()

	document.addEventListener('wpcf7mailsent', function (event) {
		if ($('.check').hasClass('onClick')) {
			$('.check').removeClass('onClick');
		}
		setTimeout(function () {
			$(".modal .close").trigger("click")
		}, 3000)



	}, false);

});